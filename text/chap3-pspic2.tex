\documentclass{article}
\usepackage{pstricks,pst-tree,pst-node}

\pagestyle{empty}
\newcommand{\stnode}[1]{\TR{\psframebox{\texttt{#1}}}}
\newcommand{\stelabel}[1]{\psframebox[fillstyle=solid,fillcolor=white,linestyle=none]{\texttt{#1}}}

\begin{document}

\pstree{\stnode{?- add(succ(succ(succ(0))), succ(succ(0)), R)}}
{
 \pstree{\stnode{?- add(succ(succ(0)), succ(succ(0)), \_G648)}\tlput{\stelabel{R = succ(\rnode{A1}{\_G648})}}}
 {
  \pstree{\stnode{?- add(succ(0), succ(succ(0)), \_G650)}\tlput{\stelabel{\rnode{A2}{\_G648} = succ(\rnode{B1}{\_G650})}}}
  {
   \pstree{\stnode{?- add(0, succ(succ(0)), \_G652)}\tlput{\stelabel{\rnode{B2}{\_G650} = succ(\rnode{C1}{\_G652})}}}
   {
    \stnode{}\tlput{\stelabel{\rnode{C2}{\_G652} = succ(succ(0))}}
   }
  }
 }
}
\nccurve[nodesep=3pt,linestyle=dotted,dotsep=1pt,angleA=-90,angleB=90]{<->}{A1}{A2}
\nccurve[nodesep=3pt,linestyle=dotted,dotsep=1pt,angleA=-90,angleB=90]{<->}{B1}{B2}
\nccurve[nodesep=3pt,linestyle=dotted,dotsep=1pt,angleA=-90,angleB=90]{<->}{C1}{C2}

\end{document}
